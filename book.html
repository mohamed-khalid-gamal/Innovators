<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com" />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap"
      rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous" />
 
    <!-- Base CSS -->
    <link rel="stylesheet" href="css/book.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <!-- <link rel="stylesheet" href="css/dual-language.css" /> -->
    
    <link
      rel="icon"
      href="imgs/Artboard 1 copy.svg"
      type="image/x-icon" />
    <title>Dashboard - Mokhtar3oon</title>
  </head>
  <body>
   
    <div class="form-container">
      <div class="form-header">
        <div class="header-top">
          <img
            src="imgs/logo.webp"
            alt="المخترعون" />
        </div>
        <div class="form-header-content">
          <h2 data-translate="formTitle">ابدأ رحلة طفلك التعليمية اليوم</h2>
          <p data-translate="formSubtitle">املأ النموذج التالي، وفريقنا سيتواصل معك لتأكيد الحجز وتفاصيل البدء</p>
        </div>
      </div>

      <form id="registrationForm">
        <div class="form-group">
          <h3 class="section-title" data-translate="childName">اسم الطفل</h3>
          <input
            type="text"
            class="form-control"
            id="childNameInput"
            data-translate-placeholder="childName"
            placeholder="اسم الطفل"
            required />
        </div>
      
        <div class="form-group">
          <h3 class="section-title" data-translate="phoneNumber">رقم الهاتف</h3>
          <input
            type="tel"
            class="form-control"
            id="phoneNumberInput"
            data-translate-placeholder="phoneNumber"
            placeholder="رقم الهاتف"
            title="Please enter a valid Egyptian phone number (e.g., 01xxxxxxxxx or +201xxxxxxxxx)"
            required />
        </div>
      
        <div class="form-group">
          <h3 class="section-title" data-translate="childAge">منطقة السكن</h3>
          <select
            class="form-control"
            id="locationInput"
            required>
            <option
              value=""
              disabled
              selected
              data-translate="selectAge"> منطقة السكن</option>
            <option value="cairo" data-translate="cairo">قاهرة</option>
            <option value="alex" data-translate="alex">اسكندرية</option>
            <option value="herghada" data-translate="herghada">الغردقة</option>
          </select>
        </div>
      
        <div class="form-group">
          <h3 class="section-title" data-translate="childAge">عمر الطفل</h3>
          <select
            class="form-control"
            id="ageInput"
            required>
            <option
              value=""
              disabled
              selected
              data-translate="selectAge">اختر العمر</option>
            <option value="6-8" data-translate="age68">6-8 سنوات</option>
            <option value="9-11" data-translate="age911">9-11 سنة</option>
            <option value="12-14" data-translate="age1214">12-14 سنة</option>
            <option value="15-17" data-translate="age1517">15-17 سنة</option>
          </select>
        </div>
        
        <div class="appointment-section">
          <h3 class="section-title" data-translate="attendanceMethod">طريقة الحضور</h3>

          <div class="form-group">
            <div class="radio-group">
              <div class="radio-option">
                <input
                  type="radio"
                  id="offline"
                  name="attendance"
                  value="offline" />
                <label for="offline" data-translate="offline">حضوري (في موقع الأكاديمية)</label>
              </div>
              <div class="radio-option">
                <input
                  type="radio"
                  id="online"
                  name="attendance"
                  value="online" />
                <label for="online" data-translate="online">عبر الإنترنت</label>
              </div>
            </div>
          </div>
        </div>

        <div class="note">
          <p data-translate="note">الحضور يكون مرة اسبوعيا في موعد ثابت , لراحة حضراتكم برجاء اختيار 3 مواعيد مناسبة حتي نسطيتع اختيار موعد يناسب حضراتكم</p>
        </div>

<!-- First Appointment -->
<div class="appointment-section">
  <h3 class="section-title" data-translate="firstAppointment">الميعاد الأول</h3>
  
  <!-- Day Selection -->
  <div class="form-group">
    <div class="radio-group">
      <div class="radio-option">
        <input type="radio" id="day1_1" name="day1" value="sunday" />
        <label for="day1_1" data-translate="sunday">الأحد</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day1_2" name="day1" value="monday" />
        <label for="day1_2" data-translate="monday">الاثنين</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day1_3" name="day1" value="tuesday" />
        <label for="day1_3" data-translate="tuesday">الثلاثاء</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day1_4" name="day1" value="wednesday" />
        <label for="day1_4" data-translate="wednesday">الأربعاء</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day1_5" name="day1" value="thursday" />
        <label for="day1_5" data-translate="thursday">الخميس</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day1_6" name="day1" value="friday" />
        <label for="day1_6" data-translate="friday">الجمعة</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day1_7" name="day1" value="saturday" />
        <label for="day1_7" data-translate="saturday">السبت</label>
      </div>
    </div>
  </div>

  <h3 class="section-title" data-translate="preferredTimeFirst">الوقت المناسب للميعاد الأول</h3>

  <!-- Time Selection -->
  <div class="form-group">
    <div class="radio-group">
      <div class="radio-option">
        <input type="radio" id="time1_1" name="time1" value="10am" />
        <label for="time1_1" data-translate="time10am">10 صباحًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time1_2" name="time1" value="12pm" />
        <label for="time1_2" data-translate="time12pm">12 ظهرًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time1_3" name="time1" value="2pm" />
        <label for="time1_3" data-translate="time2pm">2 عصرًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time1_4" name="time1" value="4pm" />
        <label for="time1_4" data-translate="time4pm">4 عصرًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time1_5" name="time1" value="6pm" />
        <label for="time1_5" data-translate="time6pm">6 مساءً</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time1_6" name="time1" value="8pm" />
        <label for="time1_6" data-translate="time8pm">8 مساءً</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time1_6" name="time1" value="10pm" />
        <label for="time1_6" data-translate="time8pm">10 مساءً</label>
      </div>
    </div>
  </div>
</div>

<!-- Second Appointment -->
<div class="appointment-section">
  <h3 class="section-title" data-translate="secondAppointment">الميعاد الثاني</h3>
  
  <!-- Day Selection -->
  <div class="form-group">
    <div class="radio-group">
      <div class="radio-option">
        <input type="radio" id="day2_1" name="day2" value="sunday" />
        <label for="day2_1" data-translate="sunday">الأحد</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day2_2" name="day2" value="monday" />
        <label for="day2_2" data-translate="monday">الاثنين</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day2_3" name="day2" value="tuesday" />
        <label for="day2_3" data-translate="tuesday">الثلاثاء</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day2_4" name="day2" value="wednesday" />
        <label for="day2_4" data-translate="wednesday">الأربعاء</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day2_5" name="day2" value="thursday" />
        <label for="day2_5" data-translate="thursday">الخميس</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day2_6" name="day2" value="friday" />
        <label for="day2_6" data-translate="friday">الجمعة</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day2_7" name="day2" value="saturday" />
        <label for="day2_7" data-translate="saturday">السبت</label>
      </div>
    </div>
  </div>

  <h3 class="section-title" data-translate="preferredTimeSecond">الوقت المناسب للميعاد الثاني</h3>

  <!-- Time Selection -->
  <div class="form-group">
    <div class="radio-group">
      <div class="radio-option">
        <input type="radio" id="time2_1" name="time2" value="10am" />
        <label for="time2_1" data-translate="time10am">10 صباحًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time2_2" name="time2" value="12pm" />
        <label for="time2_2" data-translate="time12pm">12 ظهرًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time2_3" name="time2" value="2pm" />
        <label for="time2_3" data-translate="time2pm">2 عصرًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time2_4" name="time2" value="4pm" />
        <label for="time2_4" data-translate="time4pm">4 عصرًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time2_5" name="time2" value="6pm" />
        <label for="time2_5" data-translate="time6pm">6 مساءً</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time2_6" name="time2" value="8pm" />
        <label for="time2_6" data-translate="time8pm">8 مساءً</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time2_6" name="time2" value="10pm" />
        <label for="time2_6" data-translate="time8pm">10 مساءً</label>
      </div>
    </div>
  </div>
</div>

<!-- Third Appointment -->
<div class="appointment-section">
  <h3 class="section-title" data-translate="thirdAppointment">الميعاد الثالث</h3>
  
  <!-- Day Selection -->
  <div class="form-group">
    <div class="radio-group">
      <div class="radio-option">
        <input type="radio" id="day3_1" name="day3" value="sunday" />
        <label for="day3_1" data-translate="sunday">الأحد</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day3_2" name="day3" value="monday" />
        <label for="day3_2" data-translate="monday">الاثنين</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day3_3" name="day3" value="tuesday" />
        <label for="day3_3" data-translate="tuesday">الثلاثاء</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day3_4" name="day3" value="wednesday" />
        <label for="day3_4" data-translate="wednesday">الأربعاء</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day3_5" name="day3" value="thursday" />
        <label for="day3_5" data-translate="thursday">الخميس</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day3_6" name="day3" value="friday" />
        <label for="day3_6" data-translate="friday">الجمعة</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="day3_7" name="day3" value="saturday" />
        <label for="day3_7" data-translate="saturday">السبت</label>
      </div>
    </div>
  </div>

  <h3 class="section-title" data-translate="preferredTimeThird">الوقت المناسب للميعاد الثالث</h3>

  <!-- Time Selection -->
  <div class="form-group">
    <div class="radio-group">
      <div class="radio-option">
        <input type="radio" id="time3_1" name="time3" value="10am" />
        <label for="time3_1" data-translate="time10am">10 صباحًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time3_2" name="time3" value="12pm" />
        <label for="time3_2" data-translate="time12pm">12 ظهرًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time3_3" name="time3" value="2pm" />
        <label for="time3_3" data-translate="time2pm">2 عصرًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time3_4" name="time3" value="4pm" />
        <label for="time3_4" data-translate="time4pm">4 عصرًا</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time3_5" name="time3" value="6pm" />
        <label for="time3_5" data-translate="time6pm">6 مساءً</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time3_6" name="time3" value="8pm" />
        <label for="time3_6" data-translate="time8pm">8 مساءً</label>
      </div>
      <div class="radio-option">
        <input type="radio" id="time3_6" name="time3" value="10pm" />
        <label for="time3_6" data-translate="time8pm">10 مساءً</label>
      </div>
    </div>
  </div>
</div>    
        <button
          type="submit"
          class="submit-btn"
          data-translate="confirm">تأكيد</button
        >
      </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
      
   
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get the language from URL parameter, localStorage, or default to Arabic
        const urlParams = new URLSearchParams(window.location.search);
        const urlLang = urlParams.get('lang');
        const currentLang = urlLang || localStorage.getItem('language') || 'ar';
        
        // Set initial language
        // translatePage(currentLang);
        
        // Set document direction
        document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
        document.documentElement.lang = currentLang;
        
        // Add language switcher if it doesn't exist
        if (!document.querySelector('.language-switcher')) {
            createLanguageSwitcher();
        }
        
        // Update language switcher state
        updateLanguageSwitcher();
    });

    function isValidEgyptianPhone(phone) {
        // Remove any spaces, dashes, or parentheses
        phone = phone.replace(/[\s\-\(\)]/g, '');
        
        // Check for Egyptian mobile number patterns
        const patterns = [
            /^01[0125][0-9]{8}$/,  // 01x xxxxxxxx (11 digits)
            /^\+201[0125][0-9]{8}$/ // +20 1x xxxxxxxx (13 digits)
        ];
        
        return patterns.some(pattern => pattern.test(phone));
    }

    // Add these validation functions
    function validateForm() {
        const name = document.getElementById('childNameInput').value;
        const phone = document.getElementById('phoneNumberInput').value;
        const location = document.getElementById('locationInput').value;
        const age = document.getElementById('ageInput').value;
        const attendance = document.querySelector('input[name="attendance"]:checked');
        const day1 = document.querySelector('input[name="day1"]:checked');
        const time1 = document.querySelector('input[name="time1"]:checked');
        const day2 = document.querySelector('input[name="day2"]:checked');
        const time2 = document.querySelector('input[name="time2"]:checked');
        const day3 = document.querySelector('input[name="day3"]:checked');
        const time3 = document.querySelector('input[name="time3"]:checked');

        const errors = [];

        // Name validation
        if (!name.trim()) {
            errors.push('اسم الطفل غير موجود');
        }

        // Phone validation
        if (!phone) {
            errors.push('رقم الهاتف غير موجود');
        } else if (!isValidEgyptianPhone(phone)) {
            errors.push('رقم الهاتف غير صالح');
        }

        if (!location) {
            errors.push('المنطقة غير موجودة');
        }

        // Age validation
        if (!age) {
            errors.push('عمر الطفل غير موجود');
        }

        // Attendance validation
        if (!attendance) {
            errors.push('طريقة الحضور غير موجودة');
        }

        // Days and times validation
        if (!day1 || !time1) {
            errors.push('اليوم المفضل الأول غير موجود');
        }
        if (!day2 || !time2) {
            errors.push('اليوم المفضل الثاني غير موجود');
        }
        if (!day3 || !time3) {
            errors.push('اليوم المفضل الثالث غير موجود');
        }

        return errors;
    }

    // Modify your form submission code
    document.getElementById('registrationForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const errors = validateForm();
        console.log(errors);
        if (errors.length > 0) {
            Swal.fire({
                icon: 'error',
                title: 'Please correct the following:',
                html: errors.map(error => `<div class="text-start mb-2">• ${error}</div>`).join(''),
                confirmButtonText: 'OK'
            });
            return;
        }

        // If validation passes, proceed with form submission
        const name = document.getElementById('childNameInput').value;
        const phone = document.getElementById('phoneNumberInput').value;
        const location = document.getElementById('locationInput').value;
        const age = document.getElementById('ageInput').value;
        const attendance_type = document.querySelector('input[name="attendance"]:checked').value === 'offline' ? 'in-person' : 'online';

        // الأيام والأوقات
        const day1 = document.querySelector('input[name="day1"]:checked').value;
        const time1 = document.querySelector('input[name="time1"]:checked').value;
        const day2 = document.querySelector('input[name="day2"]:checked').value;
        const time2 = document.querySelector('input[name="time2"]:checked').value;
        const day3 = document.querySelector('input[name="day3"]:checked').value;
        const time3 = document.querySelector('input[name="time3"]:checked').value;

        // جهز الـ body
        const body = {
            name,
            phone,
            location,
            age,
            attendance_type,
            day1,
            time1,
            day2,
            time2,
            day3,
            time3
        };

        try {
            const response = await fetch('https://moktareon-backend.vercel.app/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(body)
            });

            if (response.ok) {
                Swal.fire({
                    icon: 'success',
                    title: 'تم الإرسال بنجاح!',
                    text: 'سيتم التواصل معك قريبًا.',
                    confirmButtonText: 'حسنًا'
                });
                document.getElementById('registrationForm').reset();
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'حدث خطأ!',
                    text: 'برجاء المحاولة مرة أخرى.',
                    confirmButtonText: 'حسنًا'
                });
            }
        } catch (error) {
            Swal.fire({
                icon: 'error',
                title: 'حدث خطأ!',
                text: 'برجاء التأكد من الاتصال بالإنترنت والمحاولة مرة أخرى.',
                confirmButtonText: 'حسنًا'
            });
        }
    });
    </script>
  </body>
</html>
